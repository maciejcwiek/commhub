!function(a){var b={},c={};c={route:function(a,c,d){try{var e=b[a];e.call({},c,function(a){d(a||c)})}catch(f){console.log("Route not found for event:",a),d(c)}},setRoutes:function(a){b=a}},a.EventRouter=c}(GLOBAL||window),function(a,b){function c(){function a(a){return a=a||"uid_",a+""+(new Date).getTime()+parseInt(1e3*Math.random(),0)}function c(c,d){var e=this;this.id=a("eiid_"),this.event=d,this.module=c;var f=this.module.handlers[this.event];this.interceptEvent=function(a){a=a||!1;try{b.route(this.event,a,function(b){e.module.target[f].call(e.module.target,e.event,b||a)})}catch(c){this.module.target[f].call(this.module.target,this.event,a)}}}var d={},e={},f={},g={};g=function(a,b){function c(c,d){return b[c]=b[c]||[],b[c].push(new a(d,c)),b[c][b[c].length-1]}function d(a,c){for(var d=-1,e=b[a]||[];e[++d];)e[d].interceptEvent(c)}return{create:c,triggerEvent:d}}(c,f),this.registerModule=function(b){var c=a("mid_"),f=d[c]=b,h=null;f.id=c;for(h in f.handlers)e[h]=e[h]||[],e[h].push({module_id:c,interceptor_id:g.create(h,f).id})},this.broadcastEvent=function(a,b){g.triggerEvent(a,b)}}a.CommunicationHub=c}(GLOBAL||window,EventRouter);