!function(a){var b={},c={};c={route:function(a,c,d){try{var e=b[a];e.call({},c,function(a){d(a||c)})}catch(f){console.log("Route not found for event:",a),d(c)}},setRoutes:function(a){b=a}},a.EventRouter=c}(GLOBAL||window),function(a,b){function c(){function a(a){return a=a||"uid_",a+""+(new Date).getTime()+parseInt(1e3*Math.random(),0)}function c(b,c){this.id=a("eiid_"),this.event=c,this.module=b}var d={},e={},f={},g={};c.prototype.interceptEvent=function(a){a=a||!1;var c=this,d=this.module.handlers[this.event];try{b.route(this.event,a,function(b){c.module.target[d].call(c.module.target,c.event,b||a)})}catch(e){this.module.target[d].call(this.module.target,this.event,a)}},g={create:function(a,b){return f[a]=f[a]||[],f[a].push(new c(b,a)),f[a][f[a].length-1]},triggerEvent:function(a,b){for(var c=-1,d=f[a]||[];d[++c];)d[c].interceptEvent(b)}},this.registerModule=function(b){var c=a("mid_"),f=d[c]=b,h=null;f.id=c;for(h in f.handlers)e[h]=e[h]||[],e[h].push({module_id:c,interceptor_id:g.create(h,f).id})},this.emit=function(a,b){g.triggerEvent(a,b)}}function d(){return e=e instanceof c?e:new c(arguments)}var e=null;a.CommunicationHub=d}(GLOBAL||window,EventRouter);